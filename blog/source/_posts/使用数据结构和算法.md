---
title: 实用数据结构和算法
date: 2024-02-22 19:40:31
---


### 一、数据结构

#### 1、ST表

```c++
// https://vjudge.net/problem/POJ-3264
using namespace std;
const int maxn = 100010;
int FA[maxn][18];
int FB[maxn][18];
int Log2[maxn];

inline int read()
{
    int x=0,f=1;int ch=getchar();
    while (ch<'0'||ch>'9'){if (ch=='-') f=-1;ch=getchar();}
    while (ch>='0'&&ch<='9'){x=x*10+ch-48;ch=getchar();}
    return x*f;
}
int pre() {
    Log2[1] = 0;
    Log2[2] = 1;
    for(int i = 3; i < maxn; ++i) Log2[i] = Log2[i >> 1] + 1;
}
int Max(int a, int b) {
    return a > b ? a : b;
}
int Min(int a, int b){
    return a < b ? a: b;
}
int Query(int l, int r){
    int k = Log2[r - l + 1];
    int a = Max(FA[l][k], FA[r-(1<<k) + 1][k]);
    int b = Min(FB[l][k], FB[r-(1<<k) + 1][k]);
    return a - b;
}


int main() {
    int m, n, k;
    pre();
    m = read();
    n = read();
    k = Log2[m];
    for (int i = 0; i < m; ++i) FA[i][0] = FB[i][0]= read();
    for (int i = 1; i <= k; ++i) {
        for (int j = 0; j < m - (1 << (i - 1)); ++j)
            FA[j][i] = Max(FA[j][i - 1], FA[j + (1 << (i - 1))][i - 1]),
            FB[j][i] = Min(FB[j][i - 1], FB[j + (1 << (i - 1))][i - 1]);
    }
    for(int i = 0; i < n; ++i){
        if(i != 0) puts("");
        int l = read() - 1, r = read() - 1;
        printf("%d", Query(l, r));
    }
    return 0;
}

```

#### 2、求TopK的数据结构

```c++
// https://leetcode.cn/problems/find-number-of-coins-to-place-in-tree-nodes/
// 保存最小的N个数字
template<int N>
struct T120A {
    int arr[N];
    int cnt = 0;
    T120A() {
        for (int i = 0; i < N; ++i) arr[i] = INT_MAX;
    }
    void add(int x) {
        int i = 0, j = N - 2;
        while (i < N && x >= arr[i]) ++i;
        if (i == N) return;
        while (j >= i) arr[j + 1] = arr[j], --j;
        arr[i] = x;
        if (cnt < N) ++cnt;
       // for (int k = 0; k < cnt; ++k) printf("%2d ", arr[k]); puts("");
    }
};
// 保存最大的N个数字
template<int N>
struct T120B {
    int arr[N];
    int cnt = 0;
    T120B() {
        for (int i = 0; i < N; ++i) arr[i] = INT_MIN;
    }
    void add(int x) {
        int i = 0, j = N - 2;
        while (i < N && x <= arr[i]) ++i;
        if (i == N) return;
        while (j >= i) arr[j + 1] = arr[j], --j;
        arr[i] = x;
        if (cnt < N) ++cnt;
    }
};

```

